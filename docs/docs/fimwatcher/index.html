<!DOCTYPE html>
<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Defining a FimWatcher | fim-k8s</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Defining a FimWatcher" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit." />
<meta property="og:description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit." />
<meta property="og:site_name" content="fim-k8s" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-10-11T10:07:24-04:00" />
<script type="application/ld+json">
{"description":"Lorem ipsum dolor sit amet, consectetur adipiscing elit.","dateModified":"2018-10-11T10:07:24-04:00","datePublished":"2018-10-11T10:07:24-04:00","headline":"Defining a FimWatcher","mainEntityOfPage":{"@type":"WebPage","@id":"/fim-k8s/docs/fimwatcher/"},"@type":"BlogPosting","url":"/fim-k8s/docs/fimwatcher/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:image" content=""/>
  <link rel="stylesheet" href="/fim-k8s/assets/css/main.css">
  <link rel="stylesheet" href="https://cdn.rawgit.com/knsv/mermaid/7.0.0/dist/mermaid.css">
  <link rel="shortcut icon" type="image/png" href="/fim-k8s/assets/img/favicon.png" >
  <link rel="alternate" type="application/rss+xml" title="fim-k8s" href="/fim-k8s/feed.xml">
  <script src="/fim-k8s/assets/js/main.js"></script>
  
</head>


    <body>

    <header class="uk-background-secondary">
    <div data-uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky" class="uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 1904px;">
        <nav class="uk-navbar-container">
            <div class="uk-container">
    <div data-uk-navbar>
        <div class="uk-navbar-left">

            <a class="uk-navbar-item uk-logo" href="/fim-k8s/">fim-k8s</a>

        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@m">
                
                    
                    
                        <li><a href="/fim-k8s/docs" >Documentation</a></li>
                    
                
                    
                    
                        <li><a href="/fim-k8s/changelog" >Changelog</a></li>
                    
                
                    
                    
                        <li><a href="/fim-k8s/contact" >Contact</a></li>
                    
                
            </ul>

            

            <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-navbar-toggle-icon data-uk-toggle></a>

        </div>
    </div>
</div>

        </nav>
    </div>
</header>


    

    <div class="uk-section">
    <div class="uk-container">
        <div class="uk-grid-large" data-uk-grid>

            <div class="sidebar-fixed-width uk-visible@m">
                <div class="sidebar-docs uk-position-fixed">
                    
                    <h5>Introduction</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/fim-k8s/docs/overview/">Overview</a></li>
                    
                      
                      
                      <li class=""><a href="/fim-k8s/docs/getting-started/">Getting Started</a></li>
                    
                      
                      
                      <li class="uk-active"><a href="/fim-k8s/docs/fimwatcher/">Defining a FimWatcher</a></li>
                    
                    </ul>
                    
                    <h5>Technical Guide</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                      
                      
                      <li class=""><a href="/fim-k8s/docs/monitoring/">Monitoring Watches</a></li>
                    
                      
                      
                      <li class=""><a href="/fim-k8s/docs/examples/">Examples and Best Practices</a></li>
                    
                    </ul>
                    
                    <h5>Troubleshooting</h5>
                    <ul class="uk-nav uk-nav-default doc-nav">
                    
                    </ul>
                    
                </div>
            </div>

            <div class="uk-width-1-1 uk-width-expand@m">

                <article class="uk-article">

                    <h1 class="uk-article-title">Defining a FimWatcher</h1>

                    <p class="subtitle uk-text-lead uk-text-muted">File Integrity Monitoring for Kubernetes</p>

                    <div class="article-content">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

<p>Vestibulum quis nibh et nibh facilisis imperdiet. Aliquam faucibus vulputate lorem eu tincidunt.</p>

<h4 class="no_toc" id="topics">Topics</h4>
<ul id="markdown-toc">
  <li><a href="#required-definition" id="markdown-toc-required-definition">Required Definition</a></li>
  <li><a href="#recursively-watching-a-directory" id="markdown-toc-recursively-watching-a-directory">Recursively Watching a Directory</a></li>
  <li><a href="#recursively-watching-a-directory-with-a-maximum-depth" id="markdown-toc-recursively-watching-a-directory-with-a-maximum-depth">Recursively Watching a Directory with a Maximum Depth</a></li>
  <li><a href="#ignoring-specific-paths" id="markdown-toc-ignoring-specific-paths">Ignoring Specific Paths</a></li>
  <li><a href="#watching-only-directories" id="markdown-toc-watching-only-directories">Watching Only Directories</a></li>
  <li><a href="#custom-log-format" id="markdown-toc-custom-log-format">Custom Log Format</a></li>
</ul>

<h2 id="required-definition">Required Definition</h2>

<p>List all event types here. Nullam ultrices diam eget felis laoreet, ac pellentesque est dapibus.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">fimcontroller.clustergarage.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">FimWatcher</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">mywatcher</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">myapp</span>
  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
</code></pre></div></div>

<p>List of possible <code class="highlighter-rouge">events</code>:</p>
<ul>
  <li><code class="highlighter-rouge">access</code> - file was accessed</li>
  <li><code class="highlighter-rouge">modify</code> - file was modified</li>
  <li><code class="highlighter-rouge">attrib</code> - metadata changed; for example: permissions, timestamps, extended
attributes, link count, user/group ID</li>
  <li><code class="highlighter-rouge">open</code> - file or directory was opened</li>
  <li><code class="highlighter-rouge">close</code> - file opened-for-writing was closed; file or directory not
opened-for-writing was closed</li>
  <li><code class="highlighter-rouge">create</code> - file or directory was created in watched directory</li>
  <li><code class="highlighter-rouge">delete</code> - file or directory deleted from watched directory; watched file or
directory was itself deleted</li>
  <li><code class="highlighter-rouge">move</code> - watched file or directory was itself moved; moved to/from events also
included</li>
  <li><code class="highlighter-rouge">all</code> - all events above</li>
</ul>

<h2 id="recursively-watching-a-directory">Recursively Watching a Directory</h2>

<p>Quisque et leo leo. Duis eleifend elit dolor, in malesuada mi eleifend vitae.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
    <span class="na">recursive</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h2 id="recursively-watching-a-directory-with-a-maximum-depth">Recursively Watching a Directory with a Maximum Depth</h2>

<p>Quisque et leo leo. Duis eleifend elit dolor, in malesuada mi eleifend vitae.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
    <span class="na">recursive</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">maxDepth</span><span class="pi">:</span> <span class="s">2</span>
</code></pre></div></div>

<h2 id="ignoring-specific-paths">Ignoring Specific Paths</h2>

<p>Duis mollis ex felis, eu pellentesque magna cursus eget.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
    <span class="na">ignore</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">.cache</span>
    <span class="na">recursive</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h2 id="watching-only-directories">Watching Only Directories</h2>

<p>Quisque et leo leo. Duis eleifend elit dolor, in malesuada mi eleifend vitae.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
    <span class="pi">-</span> <span class="s">/file.ext</span>
    <span class="na">onlyDir</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h2 id="custom-log-format">Custom Log Format</h2>

<p>Vestibulum quis nibh et nibh facilisis imperdiet. Aliquam faucibus vulputate lorem eu tincidunt.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">fimcontroller.clustergarage.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">FimWatcher</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">mywatcher</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">myapp</span>
  <span class="na">logFormat</span><span class="pi">:</span> <span class="s2">"</span><span class="s">event</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">{event};</span><span class="nv"> </span><span class="s">path</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">{path};</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">{file}"</span>
  <span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">events</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">modify</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/to/watch</span>
</code></pre></div></div>

<p>Default log format is <code class="highlighter-rouge">{event} {ftype} '{path}{sep}{file}' ({pod}:{node})</code></p>

<p>List of possible <code class="highlighter-rouge">logFormat</code> components:</p>
<ul>
  <li><code class="highlighter-rouge">pod</code> - name of the pod</li>
  <li><code class="highlighter-rouge">node</code> - name of the node</li>
  <li><code class="highlighter-rouge">event</code> - inotify event that was observed</li>
  <li><code class="highlighter-rouge">path</code> - name of the directory path</li>
  <li><code class="highlighter-rouge">file</code> - name of the file</li>
  <li><code class="highlighter-rouge">ftype</code> - evaluates to “file” or “directory”</li>
  <li><code class="highlighter-rouge">sep</code> - placeholder for a “/” character to include between the <code class="highlighter-rouge">path</code> and <code class="highlighter-rouge">file</code></li>
</ul>

<p>Nulla quis magna erat. Etiam mollis sapien at erat tincidunt cursus.
Pellentesque nisl urna, eleifend ut rutrum eu, tincidunt eget ex. Cras congue
urna pulvinar risus blandit auctor. Nullam in feugiat odio.  Pellentesque
lobortis justo id odio imperdiet vehicula. Proin ut purus at ex tempor auctor.
Etiam vitae diam purus. Quisque ac orci metus. Vestibulum rhoncus felis vel
fermentum tincidunt.</p>


                    </div>

                    <hr class="uk-margin-medium">

                    


  
  

  
  

  
  
    <ul class="uk-pagination uk-margin-top">
          
            
            
            <li><a class="hvr-back" href="/fim-k8s/docs/getting-started/">&larr; Previous</a></li>
          
          
            
            
            <li class="uk-margin-auto-left"><a class="hvr-forward" href="/fim-k8s/docs/monitoring/">Next &rarr;</a></li>
          
    </ul>
    


                    <div class="uk-margin-large-top">
    <h3>What's Next</h3>

    
    
    

    <ul class="uk-list">
    

    
    

    

    

    

    
    

    

    

    

    
    

    

    
        <li><a href="/fim-k8s/docs/getting-started/">Getting Started</a></li>
        
        
    

    

    
    

    

    

    

    
    

    

    
        <li><a href="/fim-k8s/docs/overview/">Overview</a></li>
        
        
    

    
    </ul>
</div>

                </article>

                <script>
                    // Table of contents scroll to
                    UIkit.scroll('#markdown-toc a', {
                        duration: 400,
                        offset: 120
                    });
                </script>

            </div>

    </div>
</div>


    <div id="offcanvas" data-uk-offcanvas="flip: true; overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        <ul class="uk-nav uk-nav-default">
            <li><a class="uk-logo uk-margin-small-bottom" href="/fim-k8s/">fim-k8s</a></li>
            
            <li><a href="/fim-k8s/docs" >Documentation</a></li>
            
            <li><a href="/fim-k8s/changelog" >Changelog</a></li>
            
            <li><a href="/fim-k8s/contact" >Contact</a></li>
            
        </ul>
    </div>
</div>


    

    </body>

</html>
